async function i({text:e,gender:s}){return d({text:e,gender:s})}const c="GKDaBI8TKSBJVhsCLD6n",l="8EkOjt4xTPGMclNlh1pk";async function d({text:e,gender:s}){const r="sk_47147aad742cdc08ee6039966a1dff46e2df05489e07acf3",o=`https://api.elevenlabs.io/v1/text-to-speech/${s==="male"?c:l}`,n=await fetch(o,{method:"POST",headers:{"xi-api-key":r,"Content-Type":"application/json"},body:JSON.stringify({text:e,model_id:"eleven_multilingual_v2",voice_settings:{stability:.5,similarity_boost:.14,use_speaker_boost:!0}})});if(!n.ok){const a=await n.text();throw console.error("TTS API Error Status:",n.status),console.error("TTS API Error Body:",a),new Error(`TTS API error: ${n.status} - ${a}`)}return await n.blob()}async function u(e){return new Promise((s,r)=>{const t=new FileReader;t.onloadend=()=>{typeof t.result=="string"?s(t.result):r(new Error("Failed to convert blob to data URL."))},t.onerror=r,t.readAsDataURL(e)})}chrome.runtime.onMessage.addListener((e,s,r)=>{if(e.type==="TTS_REQUEST"){const t=e.payload;return i(t).then(o=>u(o)).then(o=>{r({success:!0,dataUrl:o})}).catch(o=>{console.error("Error in background script TTS request:",o),r({success:!1,error:o.message})}),!0}});
